<ngb-accordion #acc="ngbAccordion" [destroyOnHide]='false'>

	<!-- a comment panel -->
	<ngb-panel *ngFor='let comment of commentsRedux$ | async; index as i' [id]="key+i">

		<!-- title -->
		<ng-template ngbPanelTitle>
			<div class='comment-header' data-id={{comment.id}}>
				<span>
					{{comment.display_name}}
					{{openPanelIds}}
					<img src="http://presence.q.att.com/presence/{{comment.username}}.gif">
				</span>
				<span class="float-right">
					{{comment.created | amDateFormat:'MM/D/YY h:mm A'}}
				</span>
			</div>
		</ng-template>
		
		<!-- body -->
		<ng-template ngbPanelContent>

			<!-- editing buttons only if belongs to current user -->
			<span class='edit-buttons' *ngIf='comment.username == user.username'>
				<button type="button" class="btn btn-outline-primary" (click)="toggleEditing(comment)">
					{{comment.closeText}}
				</button>

				<button [hidden]="!comment.isEditing" type="button" class="btn btn-outline-success" 
				(click)="editComment(comment)">
					Save Edit
				</button>

				<button type="button" class="btn btn-outline-danger" (click)="deleteComment(comment.id)"
				*ngIf='!comment.isEditing'>
					Delete Comment
				</button>
			</span>
			
			<!-- comment body -->
			<div [hidden]="comment.isEditing" [innerHTML]="comment.comment | commentFormat:attachments | safehtml"></div>
			
			<!-- text area comment body -->
			<textarea [id]=comment.editId [hidden]="!comment.isEditing" 
				class='edit-area' cols="100" rows=25 value={{comment.raw_comment}}>
			</textarea>
		</ng-template>
	</ngb-panel>
</ngb-accordion>


<dev-center-modal (modalEvent)="closeDeleteModal()" [customModalCss]=customModalCss>

	<div class='modal-text'>
		<h4 class="modal-title">Delete Comment?'</h4>
	</div>

	<span class='modal-body'>
		<p>Are you sure you want to delete this comment?</p>
	</span>

	<span class='modal-footer'>
		<button type="button" class="btn btn-outline-primary" 
		(click)="closeDeleteModal(true)">
			Delete Comment
		</button>
		<button type="button" class="btn btn-outline-danger" 
		(click)="closeDeleteModal()">
			Cancel
		</button>
	</span>
	
</dev-center-modal>